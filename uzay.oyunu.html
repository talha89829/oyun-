<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Uzay Hedef Oyunu</title>
  <style>
    body, html { margin: 0; padding: 0; height: 100%; background: black; }
    canvas { display: block; width: 100%; height: 100%; }
    #score { position: absolute; color: white; font-size: 24px; top: 10px; left: 10px; font-family: sans-serif; }
  </style>
</head>
<body>
  <div id="score">Puan: 0</div>
  <canvas id="gameCanvas"></canvas>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let ship = { x: canvas.width / 2, y: canvas.height - 100, width: 50, height: 50, speed: 7 };
    let bullets = [];
    let targets = [];
    let score = 0;
    let eShown = false;

    // Hedefleri oluştur
    for (let i = 0; i < 3; i++) {
      targets.push({ x: Math.random() * (canvas.width - 60) + 30, y: Math.random() * 200 + 50, radius: 30 });
    }

    // Tuş ve dokunmatik kontrol
    let keys = {};
    document.addEventListener("keydown", e => keys[e.key] = true);
    document.addEventListener("keyup", e => keys[e.key] = false);

    // Dokunmatik tuşlar için basit alanlar
    const leftRect = { x: 100, y: canvas.height - 80, width: 80, height: 60 };
    const rightRect = { x: canvas.width - 180, y: canvas.height - 80, width: 80, height: 60 };
    const fireRect = { x: canvas.width / 2 - 40, y: canvas.height - 80, width: 80, height: 60 };

    canvas.addEventListener("touchstart", e => {
      e.preventDefault();
      for (const touch of e.touches) {
        const x = touch.clientX - canvas.getBoundingClientRect().left;
        const y = touch.clientY - canvas.getBoundingClientRect().top;
        if (x > leftRect.x && x < leftRect.x + leftRect.width && y > leftRect.y && y < leftRect.y + leftRect.height) keys["ArrowLeft"] = true;
        if (x > rightRect.x && x < rightRect.x + rightRect.width && y > rightRect.y && y < rightRect.y + rightRect.height) keys["ArrowRight"] = true;
        if (x > fireRect.x && x < fireRect.x + fireRect.width && y > fireRect.y && y < fireRect.y + fireRect.height) fireBullet();
      }
    });
    canvas.addEventListener("touchend", e => { keys["ArrowLeft"] = false; keys["ArrowRight"] = false; });

    function fireBullet() {
      bullets.push({ x: ship.x, y: ship.y - 25, width: 10, height: 20 });
    }

    // Oyun döngüsü
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Gemi hareket
      if (keys["ArrowLeft"]) ship.x -= ship.speed;
      if (keys["ArrowRight"]) ship.x += ship.speed;
      if (ship.x < ship.width / 2) ship.x = ship.width / 2;
      if (ship.x > canvas.width - ship.width / 2) ship.x = canvas.width - ship.width / 2;

      // Gemi çiz
      ctx.fillStyle = "white";
      ctx.beginPath();
      ctx.moveTo(ship.x, ship.y - ship.height / 2);
      ctx.lineTo(ship.x - ship.width / 2, ship.y + ship.height / 2);
      ctx.lineTo(ship.x + ship.width / 2, ship.y + ship.height / 2);
      ctx.closePath();
      ctx.fill();

      // Mermileri hareket ettir ve çarpışma kontrol
      for (let i = bullets.length - 1; i >= 0; i--) {
        let b = bullets[i];
        b.y -= 10;
        // hedef çarpışması
        for (let j = 0; j < targets.length; j++) {
          let t = targets[j];
          let dx = b.x - t.x;
          let dy = b.y - t.y;
          if (Math.sqrt(dx * dx + dy * dy) < t.radius) {
            bullets.splice(i, 1);
            score++;
            document.getElementById("score").innerText = "Puan: " + score;
            // hedefi yeniden konumlandır
            t.x = Math.random() * (canvas.width - 60) + 30;
            t.y = Math.random() * 200 + 50;
            break;
          }
        }
        if (b.y < 0) bullets.splice(i, 1);
      }

      // Mermileri çiz
      ctx.fillStyle = "white";
      bullets.forEach(b => ctx.fillRect(b.x - 5, b.y, b.width, b.height));

      // Hedefleri çiz
      ctx.fillStyle = "red";
      targets.forEach(t => { ctx.beginPath(); ctx.arc(t.x, t.y, t.radius, 0, Math.PI * 2); ctx.fill(); });

      // E harfi 88 puana ulaşıldığında
      if (score >= 88 && !eShown) {
        ctx.fillStyle = "yellow";
        ctx.font = "80px Arial";
        ctx.textAlign = "center";
        ctx.fillText("E", canvas.width / 2, canvas.height / 2);
        eShown = true;
      }

      // Dokunmatik tuşları çiz
      ctx.fillStyle = "gray";
      ctx.fillRect(leftRect.x, leftRect.y, leftRect.width, leftRect.height);
      ctx.fillRect(rightRect.x, rightRect.y, rightRect.width, rightRect.height);
      ctx.fillRect(fireRect.x, fireRect.y, fireRect.width, fireRect.height);
      ctx.fillStyle = "white";
      ctx.font = "24px Arial";
      ctx.fillText("←", leftRect.x + 25, leftRect.y + 40);
      ctx.fillText("→", rightRect.x + 25, rightRect.y + 40);
      ctx.fillText("↑", fireRect.x + 25, fireRect.y + 40);

      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>